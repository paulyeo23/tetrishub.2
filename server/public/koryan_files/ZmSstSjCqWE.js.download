if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("XD",["FBJSON","Stratcom"],(function(a,b,c,d,e,f){function g(a){var b=window.location.hostname.match(/\.(facebook\.sg|facebookcorewwwi\.(?:test)?onion|facebookwkhpilnemxj7asaniu7vnjjbiltxjqhye3mhbshg7kx5tfyd\.onion)$/);b=b?b[1]:"facebook.com";var c=new Image();c.crossOrigin="anonymous";c.src="https://www."+b+"/platform/scribe_endpoint.php/?c=jssdk_error&m="+encodeURIComponent(JSON.stringify(a))}var h={_initialized:!1,send:function(a,c){h._ensureInit();if(!window.postMessage||!window.JSON)return;if(!window.parent)return;a=b("FBJSON").stringify(a);if(c!=null){var d=/https?:\/\/[^\/]*/.exec(c);c=d===null?null:d[0]}c=(d=c)!=null?d:"*";try{window.parent.postMessage(a,c)}catch(a){g({error:"POST_MESSAGE",extra:{message:a.message+", html/js/mobile/platform/XD.js:73"}})}},register:function(a,c,d){h._ensureInit(),b("Stratcom").listen("xd_msg",null,function(e){e=e.getData();(e.cb==a||e.method==a)&&(d||b("Stratcom").removeCurrentListener(),c(e))})},guid:function(){return"f"+(Math.random()*(1<<30)).toString(16).replace(".","")},_onMessage:function(a){a=a.data;if(typeof a==="string")try{a=b("FBJSON").parse(a,e.id)}catch(a){}a&&(a.cb||a.method)&&b("Stratcom").invoke("xd_msg",null,a)},_ensureInit:function(){if(!h._initialized)h._initialized=!0;else return;window.addEventListener("message",h._onMessage,!1)}};e.exports=h}),null);
__d("PluginXDReady",["PHPQuerySerializer","Stratcom","URI","XD"],(function(a,b,c,d,e,f,g){e={handleMessage:function(a){if(!a.method)return;try{c("Stratcom").invoke("Connect.Unsafe."+a.method,null,JSON.parse(a.params))}catch(a){}}};window.addEventListener("message",function(a){if(a.data.xdArbiterSyn)a.source.postMessage({xdArbiterAck:!0},"*");else if(a.data.xdArbiterHandleMessage){if(!a.data.message.method)return;try{c("Stratcom").invoke("Connect.Unsafe."+a.data.message.method,null,JSON.parse(a.data.message.params))}catch(a){}}},!1);a.XdArbiter=e;function b(a){a=new(c("URI"))(a);var b={},e={xd_action:"plugin_ready",name:window.name};a=d("PHPQuerySerializer").deserialize(a.getFragment());Object.assign(b,e,a);d("XD").send(b,new(c("URI"))(a.origin).getOrigin())}g.init=b}),98);
__d("MsgrPresenceUpdateFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("2511");c=b("FalcoLoggerInternal").create("msgr_presence_update",a);e.exports=c}),null);